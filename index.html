
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReservaFácil - Sistema de Reservas de Restaurantes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .calendar-day:hover {
            background-color: #e0e7ff;
            transform: scale(1.05);
        }
        
        .calendar-day.selected {
            background-color: #4f46e5;
            color: white;
        }
        
        .calendar-day.today {
            background-color: #fbbf24;
            color: white;
            font-weight: 600;
        }
        
        .calendar-day.has-reservation {
            background-color: #ef4444;
            color: white;
        }
        
        .calendar-day.has-reservation::after {
            content: '';
            position: absolute;
            bottom: 2px;
            right: 2px;
            width: 6px;
            height: 6px;
            background-color: #fff;
            border-radius: 50%;
        }
        
        .time-slot {
            padding: 12px;
            margin: 4px 0;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }
        
        .time-slot:hover {
            border-color: #4f46e5;
            background-color: #f3f4f6;
        }
        
        .time-slot.selected {
            border-color: #4f46e5;
            background-color: #4f46e5;
            color: white;
        }
        
        .time-slot.unavailable {
            background-color: #f3f4f6;
            color: #9ca3af;
            cursor: not-allowed;
            opacity: 0.5;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .restaurant-card {
            transition: all 0.3s ease;
            border: 1px solid #e5e7eb;
        }
        
        .restaurant-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            border-color: #4f46e5;
        }
        
        .sidebar {
            transition: transform 0.3s ease;
        }
        
        .sidebar.hidden {
            transform: translateX(-100%);
        }
        
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                z-index: 50;
                height: 100vh;
                background: white;
                box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            }
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 16px 24px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background-color: #10b981;
        }
        
        .notification.error {
            background-color: #ef4444;
        }
        
        .notification.warning {
            background-color: #f59e0b;
        }
        
        .floating-action {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 40;
        }
        
        .stats-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Notification System -->
    <div id="notification" class="notification"></div>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden md:hidden"></div>

    <!-- Sidebar -->
    <div id="sidebar" class="sidebar w-64 bg-white shadow-lg fixed left-0 top-0 h-full z-50 md:relative md:translate-x-0">
        <div class="p-6 border-b">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg flex items-center justify-center">
                    <i class="fas fa-utensils text-white"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-gray-800">ReservaFácil</h1>
                    <p class="text-sm text-gray-500">Gestão de Reservas</p>
                </div>
            </div>
        </div>
        
        <nav class="p-4">
            <ul class="space-y-2">
                <li>
                    <button onclick="showPage('dashboard')" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-chart-dashboard text-gray-600"></i>
                        <span class="text-gray-700">Dashboard</span>
                    </button>
                </li>
                <li>
                    <button onclick="showPage('restaurants')" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-store text-gray-600"></i>
                        <span class="text-gray-700">Restaurantes</span>
                    </button>
                </li>
                <li>
                    <button onclick="showPage('reservations')" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-calendar-check text-gray-600"></i>
                        <span class="text-gray-700">Reservas</span>
                    </button>
                </li>
                <li>
                    <button onclick="showPage('calendar')" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-calendar text-gray-600"></i>
                        <span class="text-gray-700">Calendário</span>
                    </button>
                </li>
                <li>
                    <button onclick="showPage('analytics')" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-chart-line text-gray-600"></i>
                        <span class="text-gray-700">Relatórios</span>
                    </button>
                </li>
                <li>
                    <button onclick="showPage('customers')" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-users text-gray-600"></i>
                        <span class="text-gray-700">Clientes</span>
                    </button>
                </li>
            </ul>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="md:ml-64 min-h-screen">
        <!-- Header -->
        <header class="bg-white shadow-sm border-b">
            <div class="px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <button id="sidebar-toggle" class="md:hidden p-2 rounded-lg hover:bg-gray-100">
                            <i class="fas fa-bars text-gray-600"></i>
                        </button>
                        <div>
                            <h2 id="page-title" class="text-2xl font-semibold text-gray-800">Dashboard</h2>
                            <p id="page-subtitle" class="text-sm text-gray-500">Visão geral do sistema</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <input type="text" placeholder="Buscar..." class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                        </div>
                        <button class="p-2 rounded-lg hover:bg-gray-100 relative">
                            <i class="fas fa-bell text-gray-600"></i>
                            <span class="absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center">3</span>
                        </button>
                        <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center">
                            <i class="fas fa-user text-white text-sm"></i>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Page Content -->
        <main class="p-6">
            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="stats-card rounded-xl p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-white text-opacity-80 text-sm">Total Restaurantes</p>
                                <p class="text-2xl font-bold text-white" id="total-restaurants-stat">0</p>
                            </div>
                            <i class="fas fa-store text-white text-opacity-60 text-2xl"></i>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl p-6 border">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm">Reservas Hoje</p>
                                <p class="text-2xl font-bold text-gray-800" id="today-reservations-stat">0</p>
                            </div>
                            <i class="fas fa-calendar-day text-purple-500 text-2xl"></i>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl p-6 border">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm">Total Reservas</p>
                                <p class="text-2xl font-bold text-gray-800" id="total-reservations-stat">0</p>
                            </div>
                            <i class="fas fa-calendar-check text-green-500 text-2xl"></i>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl p-6 border">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm">Clientes</p>
                                <p class="text-2xl font-bold text-gray-800" id="total-customers-stat">0</p>
                            </div>
                            <i class="fas fa-users text-blue-500 text-2xl"></i>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                    <div class="bg-white rounded-xl p-6 border">
                        <h3 class="text-lg font-semibold mb-4">Reservas por Mês</h3>
                        <canvas id="reservationsChart" height="200"></canvas>
                    </div>
                    <div class="bg-white rounded-xl p-6 border">
                        <h3 class="text-lg font-semibold mb-4">Restaurantes Mais Populares</h3>
                        <canvas id="restaurantsChart" height="200"></canvas>
                    </div>
                </div>

                <div class="bg-white rounded-xl p-6 border">
                    <h3 class="text-lg font-semibold mb-4">Reservas Recentes</h3>
                    <div id="recent-reservations" class="space-y-4">
                        <!-- Recent reservations will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Restaurants Page -->
            <div id="restaurants-page" class="page hidden">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h3 class="text-xl font-semibold">Gerenciar Restaurantes</h3>
                        <p class="text-gray-500">Adicione e gerencie restaurantes do sistema</p>
                    </div>
                    <button onclick="showAddRestaurantModal()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                        <i class="fas fa-plus mr-2"></i>Adicionar Restaurante
                    </button>
                </div>

                <div id="restaurants-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Restaurants will be populated here -->
                </div>
            </div>

            <!-- Reservations Page -->
            <div id="reservations-page" class="page hidden">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h3 class="text-xl font-semibold">Gerenciar Reservas</h3>
                        <p class="text-gray-500">Visualize e gerencie todas as reservas</p>
                    </div>
                    <button onclick="showAddReservationModal()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                        <i class="fas fa-plus mr-2"></i>Nova Reserva
                    </button>
                </div>

                <div class="bg-white rounded-xl border overflow-hidden">
                    <div class="p-4 border-b bg-gray-50">
                        <div class="flex flex-wrap gap-4">
                            <select id="filter-restaurant" class="border rounded-lg px-3 py-2">
                                <option value="">Todos os Restaurantes</option>
                            </select>
                            <select id="filter-status" class="border rounded-lg px-3 py-2">
                                <option value="">Todos os Status</option>
                                <option value="confirmada">Confirmada</option>
                                <option value="cancelada">Cancelada</option>
                                <option value="pendente">Pendente</option>
                            </select>
                            <input type="date" id="filter-date" class="border rounded-lg px-3 py-2">
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cliente</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Restaurante</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Data/Hora</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Pessoas</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                </tr>
                            </thead>
                            <tbody id="reservations-table" class="bg-white divide-y divide-gray-200">
                                <!-- Reservations will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Calendar Page -->
            <div id="calendar-page" class="page hidden">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h3 class="text-xl font-semibold">Calendário de Reservas</h3>
                        <p class="text-gray-500">Visualize reservas em formato de calendário</p>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="previousMonth()" class="p-2 border rounded-lg hover:bg-gray-50">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button onclick="nextMonth()" class="p-2 border rounded-lg hover:bg-gray-50">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>

                <div class="bg-white rounded-xl border p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h4 id="calendar-month-year" class="text-lg font-semibold"></h4>
                        <select id="calendar-restaurant-filter" class="border rounded-lg px-3 py-2">
                            <option value="">Todos os Restaurantes</option>
                        </select>
                    </div>

                    <div class="calendar-grid mb-4">
                        <div class="text-center py-2 font-medium text-gray-500">Dom</div>
                        <div class="text-center py-2 font-medium text-gray-500">Seg</div>
                        <div class="text-center py-2 font-medium text-gray-500">Ter</div>
                        <div class="text-center py-2 font-medium text-gray-500">Qua</div>
                        <div class="text-center py-2 font-medium text-gray-500">Qui</div>
                        <div class="text-center py-2 font-medium text-gray-500">Sex</div>
                        <div class="text-center py-2 font-medium text-gray-500">Sáb</div>
                    </div>

                    <div id="calendar-days" class="calendar-grid">
                        <!-- Calendar days will be populated here -->
                    </div>

                    <div id="day-reservations" class="mt-6 hidden">
                        <h5 class="font-semibold mb-3">Reservas do dia <span id="selected-date"></span></h5>
                        <div id="day-reservations-list" class="space-y-2">
                            <!-- Day reservations will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Page -->
            <div id="analytics-page" class="page hidden">
                <div class="mb-6">
                    <h3 class="text-xl font-semibold">Relatórios e Análises</h3>
                    <p class="text-gray-500">Insights detalhados sobre o desempenho</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <div class="bg-white rounded-xl p-6 border">
                        <h4 class="text-lg font-semibold mb-4">Taxa de Ocupação</h4>
                        <canvas id="occupancyChart" height="200"></canvas>
                    </div>
                    <div class="bg-white rounded-xl p-6 border">
                        <h4 class="text-lg font-semibold mb-4">Horários Mais Populares</h4>
                        <canvas id="timesChart" height="200"></canvas>
                    </div>
                </div>

                <div class="bg-white rounded-xl p-6 border">
                    <h4 class="text-lg font-semibold mb-4">Relatório Detalhado</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="text-center">
                            <div class="text-3xl font-bold text-purple-600" id="avg-reservations">0</div>
                            <div class="text-gray-500">Média de Reservas/Dia</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-green-600" id="busiest-day">-</div>
                            <div class="text-gray-500">Dia Mais Movimentado</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-blue-600" id="peak-time">-</div>
                            <div class="text-gray-500">Horário de Pico</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customers Page -->
            <div id="customers-page" class="page hidden">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h3 class="text-xl font-semibold">Clientes</h3>
                        <p class="text-gray-500">Gerencie informações dos clientes</p>
                    </div>
                    <button onclick="exportCustomers()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                        <i class="fas fa-download mr-2"></i>Exportar
                    </button>
                </div>

                <div class="bg-white rounded-xl border overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nome</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Telefone</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total Reservas</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Última Reserva</th>
                                </tr>
                            </thead>
                            <tbody id="customers-table" class="bg-white divide-y divide-gray-200">
                                <!-- Customers will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Floating Action Button -->
    <div class="floating-action">
        <button onclick="showAddReservationModal()" class="w-14 h-14 bg-purple-600 text-white rounded-full shadow-lg hover:bg-purple-700 transition-all hover:scale-110">
            <i class="fas fa-plus"></i>
        </button>
    </div>

    <!-- Add Restaurant Modal -->
    <div id="add-restaurant-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-md w-full p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold">Adicionar Restaurante</h3>
                <button onclick="closeAddRestaurantModal()" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="add-restaurant-form" onsubmit="addRestaurant(event)">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nome do Restaurante</label>
                        <input type="text" id="restaurant-name" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Endereço</label>
                        <input type="text" id="restaurant-address" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Telefone</label>
                        <input type="tel" id="restaurant-phone" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Descrição</label>
                        <textarea id="restaurant-description" rows="3" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Capacidade</label>
                        <input type="number" id="restaurant-capacity" min="1" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                </div>
                <div class="flex space-x-3 mt-6">
                    <button type="submit" class="flex-1 bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-colors">
                        Adicionar
                    </button>
                    <button type="button" onclick="closeAddRestaurantModal()" class="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors">
                        Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Reservation Modal -->
    <div id="add-reservation-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-lg w-full p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold">Nova Reserva</h3>
                <button onclick="closeAddReservationModal()" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="add-reservation-form" onsubmit="addReservation(event)">
                <div class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Nome do Cliente</label>
                            <input type="text" id="client-name" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                            <input type="email" id="client-email" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Telefone</label>
                        <input type="tel" id="client-phone" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Restaurante</label>
                        <select id="reservation-restaurant" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <option value="">Selecione um restaurante</option>
                        </select>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Data</label>
                            <input type="date" id="reservation-date" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Número de Pessoas</label>
                            <select id="people-count" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <option value="">Selecione</option>
                                <option value="1">1 pessoa</option>
                                <option value="2">2 pessoas</option>
                                <option value="3">3 pessoas</option>
                                <option value="4">4 pessoas</option>
                                <option value="5">5 pessoas</option>
                                <option value="6">6 pessoas</option>
                                <option value="7">7 pessoas</option>
                                <option value="8">8+ pessoas</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Horário</label>
                        <div id="time-slots" class="grid grid-cols-3 gap-2">
                            <!-- Time slots will be populated here -->
                        </div>
                        <input type="hidden" id="selected-time" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Observações</label>
                        <textarea id="reservation-notes" rows="2" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"></textarea>
                    </div>
                </div>
                <div class="flex space-x-3 mt-6">
                    <button type="submit" class="flex-1 bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-colors">
                        Confirmar Reserva
                    </button>
                    <button type="button" onclick="closeAddReservationModal()" class="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors">
                        Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Data Storage
        let restaurants = [
            {
                id: 1,
                name: "Bella Vista",
                address: "Rua das Flores, 123 - Centro",
                phone: "(11) 1234-5678",
                description: "Restaurante italiano com vista panorâmica da cidade",
                capacity: 80,
                image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/046606eb-1668-44b3-8093-aea075d82187.png"
            },
            {
                id: 2,
                name: "Sabor do Mar",
                address: "Av. Atlântica, 456 - Copacabana",
                phone: "(11) 9876-5432",
                description: "Especializado em frutos do mar frescos",
                capacity: 60,
                image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/d34c40ee-4bde-4eca-acf8-479715fb0e6e.png"
            },
            {
                id: 3,
                name: "Churrascaria Gaúcha",
                address: "Rua do Comércio, 789 - Bela Vista",
                phone: "(11) 5555-4444",
                description: "Autêntica churrascaria com rodízio completo",
                capacity: 120,
                image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/a06c9d58-1b6a-40cd-8432-00d748f102af.png"
            }
        ];

        let reservations = [];
        let customers = [];
        let nextRestaurantId = 4;
        let nextReservationId = 1;
        let nextCustomerId = 1;
        let currentDate = new Date();

        // HORÁRIO DE RESERVA
        const timeSlots = [
            '11:00', '11:30', '12:00', '12:30', '13:00', '13:30',
            '18:00', '18:30', '19:00', '19:30', '20:00', '20:30', '21:00', '21:30'
        ];

        // INICIALIZAÇÃO DO SISTEMA
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            generateSampleData();
            showPage('dashboard');
        });

        function initializeApp() {
            // SETAR DATA MÍNIMA PARA RESERVA
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('reservation-date').min = today;
            document.getElementById('filter-date').value = today;

            // SETAR EVENTOS
            setupEventListeners();
            
            // GERAR TIME SLOTS
            generateTimeSlots();
            
            // INICIALIZAÇÃO DO CALENDÁRIO
            renderCalendar();
        }

        function setupEventListeners() {
            // SIDEBAR TOGGLE
            document.getElementById('sidebar-toggle').addEventListener('click', toggleSidebar);
            document.getElementById('mobile-overlay').addEventListener('click', closeSidebar);

            // FILTROS E CALENDÁRIO
            document.getElementById('filter-restaurant').addEventListener('change', filterReservations);
            document.getElementById('filter-status').addEventListener('change', filterReservations);
            document.getElementById('filter-date').addEventListener('change', filterReservations);
            document.getElementById('calendar-restaurant-filter').addEventListener('change', renderCalendar);

            // MUDANÇA DE DATA E RESTAURANTE
            document.getElementById('reservation-date').addEventListener('change', generateTimeSlots);
            document.getElementById('reservation-restaurant').addEventListener('change', generateTimeSlots);
        }

        function generateSampleData() {
            // GERA DADOS DE AMOSTRA PARA TESTE
            const sampleReservations = [
                {
                    clientName: "João Silva",
                    clientEmail: "joao@email.com",
                    clientPhone: "(11) 99999-1111",
                    restaurantId: 1,
                    date: new Date().toISOString().split('T')[0],
                    time: "19:00",
                    people: 2,
                    status: "confirmada",
                    notes: "Mesa próxima à janela"
                },
                {
                    clientName: "Maria Santos",
                    clientEmail: "maria@email.com",
                    clientPhone: "(11) 99999-2222",
                    restaurantId: 2,
                    date: new Date().toISOString().split('T')[0],
                    time: "20:00",
                    people: 4,
                    status: "confirmada",
                    notes: "Aniversário"
                }
            ];

            sampleReservations.forEach(reservation => {
                addReservationToSystem(reservation);
            });
        }

        // NAVEGAÇÃO ENTRE PÁGINAS
        function showPage(page) {
            // ESCONDE TODOS OS ELEMENTOS DE PÁGINA
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            
            // REMOVE HIGHLIGHT FROM ALL NAV ITEMS
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('bg-purple-100', 'text-purple-700');
            });

            // SELECIONA A PÁGINA
            document.getElementById(`${page}-page`).classList.remove('hidden');
            
            // ATUALIZA TÍTULO E SUBTÍTULO
            const titles = {
                'dashboard': { title: 'Dashboard', subtitle: 'Visão geral do sistema' },
                'restaurants': { title: 'Restaurantes', subtitle: 'Gerencie restaurantes do sistema' },
                'reservations': { title: 'Reservas', subtitle: 'Visualize e gerencie reservas' },
                'calendar': { title: 'Calendário', subtitle: 'Visualize reservas em calendário' },
                'analytics': { title: 'Relatórios', subtitle: 'Insights e análises detalhadas' },
                'customers': { title: 'Clientes', subtitle: 'Gerencie informações dos clientes' }
            };

            if (titles[page]) {
                document.getElementById('page-title').textContent = titles[page].title;
                document.getElementById('page-subtitle').textContent = titles[page].subtitle;
            }

            // NAVEGATION HIGHLIGHT
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach((item, index) => {
                const pages = ['dashboard', 'restaurants', 'reservations', 'calendar', 'analytics', 'customers'];
                if (pages[index] === page) {
                    item.classList.add('bg-purple-100', 'text-purple-700');
                }
            });

            // LOAD PAGE
            switch(page) {
                case 'dashboard':
                    loadDashboard();
                    break;
                case 'restaurants':
                    renderRestaurants();
                    break;
                case 'reservations':
                    renderReservations();
                    populateFilterRestaurants();
                    break;
                case 'calendar':
                    renderCalendar();
                    populateCalendarRestaurants();
                    break;
                case 'analytics':
                    loadAnalytics();
                    break;
                case 'customers':
                    renderCustomers();
                    break;
            }

            // FECHA SIDEBAR EM TELAS MENORES
            if (window.innerWidth < 768) {
                closeSidebar();
            }
        }

        // FUNÇÕES DO SIDEBAR
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobile-overlay');
            
            if (sidebar.classList.contains('hidden')) {
                sidebar.classList.remove('hidden');
                overlay.classList.remove('hidden');
            } else {
                sidebar.classList.add('hidden');
                overlay.classList.add('hidden');
            }
        }

        function closeSidebar() {
            document.getElementById('sidebar').classList.add('hidden');
            document.getElementById('mobile-overlay').classList.add('hidden');
        }

        // FUNÇÕES DO DASHBOARD
        function loadDashboard() {
            updateStats();
            renderRecentReservations();
            createCharts();
        }

        function updateStats() {
            document.getElementById('total-restaurants-stat').textContent = restaurants.length;
            
            const today = new Date().toISOString().split('T')[0];
            const todayReservations = reservations.filter(r => r.date === today && r.status === 'confirmada').length;
            document.getElementById('today-reservations-stat').textContent = todayReservations;
            
            document.getElementById('total-reservations-stat').textContent = reservations.length;
            document.getElementById('total-customers-stat').textContent = customers.length;
        }

        function renderRecentReservations() {
            const container = document.getElementById('recent-reservations');
            const recent = reservations.slice(-5).reverse();
            
            if (recent.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-4">Nenhuma reserva encontrada</p>';
                return;
            }

            container.innerHTML = recent.map(reservation => {
                const restaurant = restaurants.find(r => r.id === reservation.restaurantId);
                const statusColors = {
                    'confirmada': 'bg-green-100 text-green-800',
                    'cancelada': 'bg-red-100 text-red-800',
                    'pendente': 'bg-yellow-100 text-yellow-800'
                };

                return `
                    <div class="flex items-center justify-between p-4 border rounded-lg">
                        <div>
                            <h4 class="font-medium">${reservation.clientName}</h4>
                            <p class="text-sm text-gray-500">${restaurant ? restaurant.name : 'Restaurante não encontrado'}</p>
                            <p class="text-sm text-gray-500">${formatDate(reservation.date)} às ${reservation.time}</p>
                        </div>
                        <div class="text-right">
                            <span class="px-2 py-1 rounded-full text-xs ${statusColors[reservation.status] || 'bg-gray-100 text-gray-800'}">
                                ${reservation.status}
                            </span>
                            <p class="text-sm text-gray-500 mt-1">${reservation.people} pessoas</p>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function createCharts() {
            // RESERVAS POR MÊS E RESTAURANTES MAIS POPULARES
            const ctx1 = document.getElementById('reservationsChart').getContext('2d');
            new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'],
                    datasets: [{
                        label: 'Reservas',
                        data: [12, 19, 15, 25, 22, 30],
                        borderColor: '#4f46e5',
                        backgroundColor: 'rgba(79, 70, 229, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // RESERVAS POR RESTAURANTE
            const ctx2 = document.getElementById('restaurantsChart').getContext('2d');
            const restaurantData = restaurants.map(restaurant => {
                const count = reservations.filter(r => r.restaurantId === restaurant.id).length;
                return { name: restaurant.name, count };
            });

            new Chart(ctx2, {
                type: 'doughnut',
                data: {
                    labels: restaurantData.map(r => r.name),
                    datasets: [{
                        data: restaurantData.map(r => r.count),
                        backgroundColor: ['#4f46e5', '#059669', '#dc2626', '#f59e0b']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // FUNCOES DOS RESTAURANTES
        function renderRestaurants() {
            const grid = document.getElementById('restaurants-grid');
            grid.innerHTML = '';

            restaurants.forEach(restaurant => {
                const reservationCount = reservations.filter(r => r.restaurantId === restaurant.id).length;
                
                const card = document.createElement('div');
                card.className = 'restaurant-card bg-white rounded-xl p-6 fade-in';
                card.innerHTML = `
                    <img src="${restaurant.image}" alt="Interior elegante do restaurante ${restaurant.name} com decoração moderna e ambiente aconchegante" class="w-full h-40 object-cover rounded-lg mb-4">
                    <h3 class="text-lg font-semibold mb-2">${restaurant.name}</h3>
                    <p class="text-gray-600 text-sm mb-2">${restaurant.description}</p>
                    <p class="text-gray-500 text-sm mb-1"><i class="fas fa-map-marker-alt mr-1"></i>${restaurant.address}</p>
                    <p class="text-gray-500 text-sm mb-1"><i class="fas fa-phone mr-1"></i>${restaurant.phone}</p>
                    <p class="text-gray-500 text-sm mb-4"><i class="fas fa-users mr-1"></i>Capacidade: ${restaurant.capacity} pessoas</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-purple-600 font-medium">${reservationCount} reservas</span>
                        <div class="space-x-2">
                            <button onclick="editRestaurant(${restaurant.id})" class="text-blue-600 hover:text-blue-800">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deleteRestaurant(${restaurant.id})" class="text-red-600 hover:text-red-800">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function showAddRestaurantModal() {
            document.getElementById('add-restaurant-modal').classList.remove('hidden');
        }

        function closeAddRestaurantModal() {
            document.getElementById('add-restaurant-modal').classList.add('hidden');
            document.getElementById('add-restaurant-form').reset();
        }

        function addRestaurant(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const restaurant = {
                id: nextRestaurantId++,
                name: document.getElementById('restaurant-name').value,
                address: document.getElementById('restaurant-address').value,
                phone: document.getElementById('restaurant-phone').value,
                description: document.getElementById('restaurant-description').value,
                capacity: parseInt(document.getElementById('restaurant-capacity').value),
                image: `https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/430633c7-f5f2-48cc-b2c6-ac613e5aaa28.png'restaurant-name').value)}`
            };

            restaurants.push(restaurant);
            closeAddRestaurantModal();
            renderRestaurants();
            showNotification('Restaurante adicionado com sucesso!', 'success');
            updateStats();
        }

        function deleteRestaurant(id) {
            if (confirm('Tem certeza que deseja excluir este restaurante?')) {
                restaurants = restaurants.filter(r => r.id !== id);
                renderRestaurants();
                showNotification('Restaurante excluído com sucesso!', 'success');
                updateStats();
            }
        }

        // FUNCOES DAS RESERVAS
        function renderReservations() {
            const tbody = document.getElementById('reservations-table');
            const filteredReservations = getFilteredReservations();
            
            if (filteredReservations.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" class="px-6 py-4 text-center text-gray-500">Nenhuma reserva encontrada</td></tr>';
                return;
            }

            tbody.innerHTML = filteredReservations.map(reservation => {
                const restaurant = restaurants.find(r => r.id === reservation.restaurantId);
                const statusColors = {
                    'confirmada': 'bg-green-100 text-green-800',
                    'cancelada': 'bg-red-100 text-red-800',
                    'pendente': 'bg-yellow-100 text-yellow-800'
                };

                return `
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4">
                            <div>
                                <div class="font-medium text-gray-900">${reservation.clientName}</div>
                                <div class="text-gray-500 text-sm">${reservation.clientPhone}</div>
                            </div>
                        </td>
                        <td class="px-6 py-4">
                            <div class="text-gray-900">${restaurant ? restaurant.name : 'N/A'}</div>
                        </td>
                        <td class="px-6 py-4">
                            <div class="text-gray-900">${formatDate(reservation.date)}</div>
                            <div class="text-gray-500 text-sm">${reservation.time}</div>
                        </td>
                        <td class="px-6 py-4 text-gray-900">${reservation.people}</td>
                        <td class="px-6 py-4">
                            <span class="px-2 py-1 rounded-full text-xs ${statusColors[reservation.status]}">
                                ${reservation.status}
                            </span>
                        </td>
                        <td class="px-6 py-4">
                            <div class="flex space-x-2">
                                <button onclick="editReservation(${reservation.id})" class="text-blue-600 hover:text-blue-800">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button onclick="cancelReservation(${reservation.id})" class="text-red-600 hover:text-red-800">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function getFilteredReservations() {
            let filtered = [...reservations];
            
            const restaurantFilter = document.getElementById('filter-restaurant').value;
            const statusFilter = document.getElementById('filter-status').value;
            const dateFilter = document.getElementById('filter-date').value;

            if (restaurantFilter) {
                filtered = filtered.filter(r => r.restaurantId == restaurantFilter);
            }
            
            if (statusFilter) {
                filtered = filtered.filter(r => r.status === statusFilter);
            }
            
            if (dateFilter) {
                filtered = filtered.filter(r => r.date === dateFilter);
            }

            return filtered.sort((a, b) => new Date(b.date + ' ' + b.time) - new Date(a.date + ' ' + a.time));
        }

        function filterReservations() {
            renderReservations();
        }

        function populateFilterRestaurants() {
            const select = document.getElementById('filter-restaurant');
            select.innerHTML = '<option value="">Todos os Restaurantes</option>' +
                restaurants.map(r => `<option value="${r.id}">${r.name}</option>`).join('');
        }

        function showAddReservationModal() {
            document.getElementById('add-reservation-modal').classList.remove('hidden');
            populateReservationRestaurants();
            generateTimeSlots();
        }

        function closeAddReservationModal() {
            document.getElementById('add-reservation-modal').classList.add('hidden');
            document.getElementById('add-reservation-form').reset();
            document.getElementById('selected-time').value = '';
        }

        function populateReservationRestaurants() {
            const select = document.getElementById('reservation-restaurant');
            select.innerHTML = '<option value="">Selecione um restaurante</option>' +
                restaurants.map(r => `<option value="${r.id}">${r.name}</option>`).join('');
        }

        function generateTimeSlots() {
            const container = document.getElementById('time-slots');
            const selectedDate = document.getElementById('reservation-date').value;
            const selectedRestaurant = document.getElementById('reservation-restaurant').value;
            
            if (!selectedDate || !selectedRestaurant) {
                container.innerHTML = '<p class="text-gray-500 text-sm col-span-3">Selecione data e restaurante primeiro</p>';
                return;
            }

            container.innerHTML = timeSlots.map(time => {
                const isUnavailable = reservations.some(r => 
                    r.date === selectedDate && 
                    r.time === time && 
                    r.restaurantId == selectedRestaurant &&
                    r.status === 'confirmada'
                );

                return `
                    <div class="time-slot ${isUnavailable ? 'unavailable' : ''}" 
                         onclick="${isUnavailable ? '' : 'selectTimeSlot(this, \'' + time + '\')'}"
                         data-time="${time}">
                        ${time}
                        ${isUnavailable ? '<br><small>Ocupado</small>' : ''}
                    </div>
                `;
            }).join('');
        }

        function selectTimeSlot(element, time) {
            // REMOVE SELEÇÃO DE TODOS OS SLOTS
            document.querySelectorAll('.time-slot').forEach(slot => {
                slot.classList.remove('selected');
            });
            
            // SELECIONA O SLOT ATUAL
            element.classList.add('selected');
            document.getElementById('selected-time').value = time;
        }

        function addReservation(event) {
            event.preventDefault();
            
            const reservation = {
                clientName: document.getElementById('client-name').value,
                clientEmail: document.getElementById('client-email').value,
                clientPhone: document.getElementById('client-phone').value,
                restaurantId: parseInt(document.getElementById('reservation-restaurant').value),
                date: document.getElementById('reservation-date').value,
                time: document.getElementById('selected-time').value,
                people: parseInt(document.getElementById('people-count').value),
                status: 'confirmada',
                notes: document.getElementById('reservation-notes').value
            };

            if (!reservation.time) {
                showNotification('Por favor, selecione um horário', 'error');
                return;
            }

            addReservationToSystem(reservation);
            closeAddReservationModal();
            showNotification('Reserva criada com sucesso!', 'success');
            
            // RENDERIZA AS RESERVAS ATUALIZADAS
            const currentPage = document.querySelector('.page:not(.hidden)').id.replace('-page', '');
            if (currentPage === 'reservations') {
                renderReservations();
            } else if (currentPage === 'dashboard') {
                loadDashboard();
            } else if (currentPage === 'calendar') {
                renderCalendar();
            }
        }

        function addReservationToSystem(reservationData) {
            const reservation = {
                id: nextReservationId++,
                ...reservationData
            };

            reservations.push(reservation);

            // ADICIONA OU ATUALIZA O CLIENTE
            const existingCustomer = customers.find(c => 
                c.email === reservation.clientEmail || c.phone === reservation.clientPhone
            );

            if (!existingCustomer) {
                customers.push({
                    id: nextCustomerId++,
                    name: reservation.clientName,
                    email: reservation.clientEmail,
                    phone: reservation.clientPhone,
                    totalReservations: 1,
                    lastReservation: reservation.date
                });
            } else {
                existingCustomer.totalReservations++;
                existingCustomer.lastReservation = reservation.date;
            }

            updateStats();
        }

        function cancelReservation(id) {
            if (confirm('Tem certeza que deseja cancelar esta reserva?')) {
                const reservation = reservations.find(r => r.id === id);
                if (reservation) {
                    reservation.status = 'cancelada';
                    renderReservations();
                    showNotification('Reserva cancelada com sucesso!', 'success');
                    updateStats();
                }
            }
        }

        // FUNÇÕES DO CALENDÁRIO
        function renderCalendar() {
            const container = document.getElementById('calendar-days');
            const monthYear = document.getElementById('calendar-month-year');
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            monthYear.textContent = new Date(year, month).toLocaleDateString('pt-BR', { 
                month: 'long', 
                year: 'numeric' 
            });

            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());

            container.innerHTML = '';

            const filterRestaurant = document.getElementById('calendar-restaurant-filter').value;

            for (let i = 0; i < 42; i++) {
                const date = new Date(startDate);
                date.setDate(startDate.getDate() + i);
                
                const isCurrentMonth = date.getMonth() === month;
                const isToday = date.toDateString() === new Date().toDateString();
                const dateStr = date.toISOString().split('T')[0];
                
                let dayReservations = reservations.filter(r => r.date === dateStr && r.status === 'confirmada');
                if (filterRestaurant) {
                    dayReservations = dayReservations.filter(r => r.restaurantId == filterRestaurant);
                }
                
                const hasReservations = dayReservations.length > 0;

                const dayElement = document.createElement('div');
                dayElement.className = `calendar-day ${isToday ? 'today' : ''} ${hasReservations ? 'has-reservation' : ''} ${!isCurrentMonth ? 'text-gray-300' : ''}`;
                dayElement.textContent = date.getDate();
                dayElement.onclick = () => showDayReservations(dateStr, dayReservations);
                
                container.appendChild(dayElement);
            }
        }

        function showDayReservations(date, dayReservations) {
            const container = document.getElementById('day-reservations');
            const dateSpan = document.getElementById('selected-date');
            const list = document.getElementById('day-reservations-list');
            
            dateSpan.textContent = formatDate(date);
            
            if (dayReservations.length === 0) {
                list.innerHTML = '<p class="text-gray-500">Nenhuma reserva neste dia</p>';
            } else {
                list.innerHTML = dayReservations.map(reservation => {
                    const restaurant = restaurants.find(r => r.id === reservation.restaurantId);
                    return `
                        <div class="bg-gray-50 p-3 rounded-lg">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h6 class="font-medium">${reservation.clientName}</h6>
                                    <p class="text-sm text-gray-600">${restaurant ? restaurant.name : 'N/A'}</p>
                                    <p class="text-sm text-gray-500">${reservation.time} - ${reservation.people} pessoas</p>
                                </div>
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">
                                    ${reservation.status}
                                </span>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            container.classList.remove('hidden');
        }

        function populateCalendarRestaurants() {
            const select = document.getElementById('calendar-restaurant-filter');
            select.innerHTML = '<option value="">Todos os Restaurantes</option>' +
                restaurants.map(r => `<option value="${r.id}">${r.name}</option>`).join('');
        }

        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        }

        // ANALYTICS
        function loadAnalytics() {
            calculateAnalytics();
            createAnalyticsCharts();
        }

        function calculateAnalytics() {
            const totalDays = 30; // ULTIMOS 30 DIAS
            const avgReservations = Math.round(reservations.length / totalDays * 10) / 10;
            document.getElementById('avg-reservations').textContent = avgReservations;

            // ACHA4 o dia mais movimentado
            const dayCount = {};
            reservations.forEach(r => {
                const day = new Date(r.date).getDay();
                const dayName = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'][day];
                dayCount[dayName] = (dayCount[dayName] || 0) + 1;
            });
            
            const busiestDay = Object.keys(dayCount).reduce((a, b) => 
                dayCount[a] > dayCount[b] ? a : b, 'N/A'
            );
            document.getElementById('busiest-day').textContent = busiestDay;

            // ACHA o horário mais movimentado
            const timeCount = {};
            reservations.forEach(r => {
                const hour = r.time.split(':')[0];
                timeCount[hour] = (timeCount[hour] || 0) + 1;
            });
            
            const peakHour = Object.keys(timeCount).reduce((a, b) => 
                timeCount[a] > timeCount[b] ? a : b, 'N/A'
            );
            document.getElementById('peak-time').textContent = peakHour !== 'N/A' ? peakHour + ':00' : 'N/A';
        }

        function createAnalyticsCharts() {
            // OCUPAÇÃO POR DIA DA SEMANA
            const ctx1 = document.getElementById('occupancyChart').getContext('2d');
            new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'],
                    datasets: [{
                        label: 'Taxa de Ocupação (%)',
                        data: [65, 80, 75, 85, 90, 95, 70],
                        backgroundColor: '#4f46e5'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });

            // TEMPO POPULAR DE RESERVAS
            const ctx2 = document.getElementById('timesChart').getContext('2d');
            new Chart(ctx2, {
                type: 'line',
                data: {
                    labels: ['11:00', '12:00', '13:00', '18:00', '19:00', '20:00', '21:00'],
                    datasets: [{
                        label: 'Reservas',
                        data: [5, 15, 20, 25, 35, 30, 15],
                        borderColor: '#059669',
                        backgroundColor: 'rgba(5, 150, 105, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }

        // FUNÇÕES DOS CLIENTES
        function renderCustomers() {
            const tbody = document.getElementById('customers-table');
            
            if (customers.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" class="px-6 py-4 text-center text-gray-500">Nenhum cliente encontrado</td></tr>';
                return;
            }

            tbody.innerHTML = customers.map(customer => `
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 font-medium text-gray-900">${customer.name}</td>
                    <td class="px-6 py-4 text-gray-900">${customer.email || '-'}</td>
                    <td class="px-6 py-4 text-gray-900">${customer.phone}</td>
                    <td class="px-6 py-4 text-gray-900">${customer.totalReservations}</td>
                    <td class="px-6 py-4 text-gray-900">${formatDate(customer.lastReservation)}</td>
                </tr>
            `).join('');
        }

        function exportCustomers() {
            const data = customers.map(customer => ({
                Nome: customer.name,
                Email: customer.email || '',
                Telefone: customer.phone,
                'Total Reservas': customer.totalReservations,
                'Última Reserva': customer.lastReservation
            }));

            const csv = convertToCSV(data);
            downloadCSV(csv, 'clientes.csv');
            showNotification('Dados exportados com sucesso!', 'success');
        }

        // FUNÇÕES GERAIS
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('pt-BR');
        }

        function convertToCSV(data) {
            if (data.length === 0) return '';
            
            const headers = Object.keys(data[0]);
            const csvContent = [
                headers.join(','),
                ...data.map(row => headers.map(header => `"${row[header]}"`).join(','))
            ].join('\n');
            
            return csvContent;
        }

        function downloadCSV(csv, filename) {
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // RESPONSIVE SIDEBAR
        window.addEventListener('resize', function() {
            if (window.innerWidth >= 768) {
                document.getElementById('sidebar').classList.remove('hidden');
                document.getElementById('mobile-overlay').classList.add('hidden');
            } else {
                document.getElementById('sidebar').classList.add('hidden');
            }
        });
    </script>
</body>
</html>

